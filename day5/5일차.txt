데이터베이스 5일차
학습목표 : 
 

1.   view 만들고 사용할 수 있다 ( 단순뷰, 복합뷰, 인라인 뷰)

2.   서브쿼리의 종류를 알 수 있다.       
    - 단일행 서브쿼리,  다중행 서브쿼리 ,  다중컬럼 서브쿼리
    - 인라인 뷰 서브쿼리 

3.   연관서브쿼리와 비연관서브쿼리를 구분할 수 있다
 
4.  DML 에서 CRUD에서  U:수정, D:삭제, C:삽입하는 sql 구문을 작성할 수 있다
    :insert , updete , delete  SQL문을 작성할 수 있다
 
 
 

##################
서브쿼리란?  하나의 쿼리안에 또 다른 하나의 쿼리가 담겨있는 것
    

서브쿼리를 사용하는 위치  : 
  
1) From절에 오는 서브쿼리(인라인 뷰  ) 

2) Where절에 오는 서브쿼리 (단일행,  복수행 , 다중컬럼  ) 

3) SELECT절 뒤에 오는 서브쿼리 ( 스칼라 서브쿼리 , 단일행, 단일컬럼만 가능) 
    - 주로  내용이 적은 코드성테이블 가져올 때 조인 대신에 사용함
 
  

####서브쿼리 분류
데이터반환 형태  :  단일행서브쿼리, 다중행 서브쿼리, 다중컬럼 서브쿼리
동작방식   :비연관 서브쿼리,  연관서브쿼리




######서브쿼리(FROM절)
단일행 ,단일컬럼  서브쿼리  사용 가능연산자  :    = , <> ,  >,>= ,<= ,< 
다중행, 단일컬럼 서브쿼리  사용 가능 연산자 :    IN, EXISTS, >ANY, <ANY,  <ALL, >ALL
다중행, 다중컬럼 서브쿼리  사용 가능 연산자  :   IN 



########
VIEW (뷰) 
view:     사용자에게 다양한 뷰를 제공할 수 있다. 
view :    단순뷰, 복합뷰, 인라인뷰



#####################
데이터 조작하기
 SQL - DML ( read-select  ,  create-insert ,   update , delete ) 
######################
-dml ( 데이터추가, 변경, 삭제 하는  sql 배우기)
-select 
-update
-delete
-insert    :    서브쿼리를 이용한 여러 건의 데이터 입력 가능
                 insert into 테이블A명  
                 select *  from 테이블B명;
                  ( 두 테이블은  컬럼수와 데이터 타입이 같아야 함)
                 p.296 실습



 

Scott에   view 권한 주기 !!!!!!!!!!!!!!!!!!!!!!!!!!!!
1. cmd창 실행하기
2. sqlplus / as sysdba ;            -- dba접속 한다
3. grant create view to scott;    -- scott에  view  권한주기 
 


실습 #######
뷰 연습문제 ###  
p. 420   문제풀기
-1,2,3,4

 
### 서브쿼리 실습 ####
420  2번 연습문제 힌트))

Student테이블
Department 테이블

line view 사용하여 학과별로 학생들의 최대키와 최대몸무게를 학과이름과 함께 출력
1. 학과별로 학생들의 최대키와 최대몸무게 조회하기 
2. from절 뒤의 서브쿼리(인라인 뷰) , 학과테이블 조인하기 

  select    학과이름  ,최대몸무게, 최대키
  from
  (

     학과별로 학생들의 최대키와 최대몸무게 조회하기 

  )  s
  join department d
  on s.학과코드  = d.학과코드 ;


4번 문제 힌트)
--학년별 평균키 구해보기
select  grade , avg(height)  from student  group by grade;

--위의 내용을 from절 뒤 서브쿼리로 만들고 학생테이블과 조인하기
--평균키보다 큰 학생을 조회