-- 카테고리 테이블 
CREATE TABLE ITEM_CATEGORY (
    CATEGORY_ID VARCHAR2(20) PRIMARY KEY,
    CATEGORY_NAME VARCHAR2(30) NOT NULL,
    CATEGORY_DESC VARCHAR2(100)
);

-- 무기 테이블 
CREATE TABLE WEAPON (
    WEAPON_ID VARCHAR2(10) PRIMARY KEY,
    WEAPON_NAME VARCHAR2(30) NOT NULL,
    WEAPON_ATK NUMBER(3) NOT NULL,
    WEAPON_TYPE VARCHAR2(20) NOT NULL,
    CATEGORY_ID VARCHAR2(20) NOT NULL,
    WEAPON_DESC VARCHAR2(100),
    MIN_LEVEL NUMBER(3) DEFAULT 1,
    CONSTRAINT FK_WEAPON_CATEGORY FOREIGN KEY (CATEGORY_ID) REFERENCES ITEM_CATEGORY(CATEGORY_ID)
);

-- 방어구 테이블 
CREATE TABLE ARMOUR (
    ARMOUR_ID VARCHAR2(10) PRIMARY KEY,
    ARMOUR_NAME VARCHAR2(30) NOT NULL,
    ARMOUR_DEF NUMBER(3) NOT NULL,
    ARMOUR_TYPE VARCHAR2(20) NOT NULL,
    CATEGORY_ID VARCHAR2(20) NOT NULL,
    ARMOUR_DESC VARCHAR2(100),
    ARMOUR_SLOT VARCHAR2(20) NOT NULL,
    MIN_LEVEL NUMBER(3) DEFAULT 1,
    CONSTRAINT FK_ARMOUR_CATEGORY FOREIGN KEY (CATEGORY_ID) REFERENCES ITEM_CATEGORY(CATEGORY_ID)
);

-- 재료 마스터 테이블 
CREATE TABLE MISC_MASTER_TABLE (
    MISC_ID VARCHAR2(20) PRIMARY KEY,
    MISC_NAME VARCHAR2(30) NOT NULL,
    MISC_TYPE VARCHAR2(20) NOT NULL,
    MISC_DESC VARCHAR2(100),
    STACKABLE CHAR(1) DEFAULT 'Y' CHECK (STACKABLE IN ('Y', 'N'))
);

-- 장비 세트 테이블 
CREATE TABLE ARMOUR_SET (
    ARMOUR_SET_ID VARCHAR2(20) PRIMARY KEY,
    ARMOUR_SET_NAME VARCHAR2(30) NOT NULL,
    ARMOUR_SET_EFFECT VARCHAR2(100) NOT NULL,
    MIN_LEVEL NUMBER(3) DEFAULT 1
);

-- 장비 세트 구성품 테이블 
CREATE TABLE ARMOUR_SET_ITEMS (
    ARMOUR_SET_ID VARCHAR2(20) NOT NULL,
    ITEM_ID VARCHAR2(20) NOT NULL,
    ITEM_TYPE VARCHAR2(20) NOT NULL, 
    CONSTRAINT PK_ARMOUR_SET_ITEMS PRIMARY KEY (ARMOUR_SET_ID, ITEM_ID),
    CONSTRAINT FK_ARMOUR_SET_ID FOREIGN KEY (ARMOUR_SET_ID) REFERENCES ARMOUR_SET(ARMOUR_SET_ID)
);

-- 상점 테이블 
CREATE TABLE SHOP (
    SHOP_ID VARCHAR2(20) PRIMARY KEY,
    SHOP_NAME VARCHAR2(30) NOT NULL,
    SHOP_LOC VARCHAR2(40) NOT NULL,
    SHOP_TYPE VARCHAR2(20),
    SHOP_DESC VARCHAR2(100)
);

-- 상점 물품 정보 테이블 
CREATE TABLE PRODUCT_LIST (
    SHOP_ID VARCHAR2(20) NOT NULL,
    PRODUCT_ID VARCHAR2(30) NOT NULL,
    PRODUCT_TYPE VARCHAR2(20) NOT NULL, 
    PRODUCT_PRICE NUMBER(10) NOT NULL,
    PRODUCT_STOCK NUMBER(3) NOT NULL,
    CONSTRAINT PK_PRODUCT_LIST PRIMARY KEY (SHOP_ID, PRODUCT_ID),
    CONSTRAINT FK_SHOP_ID FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID)
);

-- 재료 레시피 테이블 
CREATE TABLE RECIPE_MISC (
    RECIPE_MISC_ID VARCHAR2(20) PRIMARY KEY,
    RECIPE_DESC VARCHAR2(100)
);

-- 레시피 재료 상세 테이블 
CREATE TABLE RECIPE_INGREDIENTS (
    RECIPE_MISC_ID VARCHAR2(20) NOT NULL,
    INGREDIENT_ID VARCHAR2(20) NOT NULL,
    AMOUNT NUMBER(3) NOT NULL,
    CONSTRAINT PK_RECIPE_INGREDIENTS PRIMARY KEY (RECIPE_MISC_ID, INGREDIENT_ID),
    CONSTRAINT FK_RECIPE_MISC_ID FOREIGN KEY (RECIPE_MISC_ID) REFERENCES RECIPE_MISC(RECIPE_MISC_ID),
    CONSTRAINT FK_INGREDIENT_ID FOREIGN KEY (INGREDIENT_ID) REFERENCES MISC_MASTER_TABLE(MISC_ID)
);

-- 장비 제작법 테이블 
CREATE TABLE RECIPE (
    RECIPE_ID VARCHAR2(20) PRIMARY KEY,
    RECIPE_MISC_ID VARCHAR2(20) NOT NULL,
    RECIPE_RESULT_ID VARCHAR2(20) NOT NULL,
    RECIPE_RESULT_TYPE VARCHAR2(20) NOT NULL, -- 'WEAPON', 'ARMOUR', 'MISC' 등
    RECIPE_NAME VARCHAR2(30) NOT NULL,
    RECIPE_DESC VARCHAR2(100),
    CONSTRAINT FK_RECIPE_MISC_ID FOREIGN KEY (RECIPE_MISC_ID) REFERENCES RECIPE_MISC(RECIPE_MISC_ID)
);

-- 플레이어 테이블 
CREATE TABLE PLAYER (
    PLAYER_ID VARCHAR2(20) PRIMARY KEY,
    PLAYER_NAME VARCHAR2(30) NOT NULL,
    PLAYER_LEVEL NUMBER(3) DEFAULT 1,
    PLAYER_GOLD NUMBER(10) DEFAULT 0,
    PLAYER_STR NUMBER(3) DEFAULT 10,
    PLAYER_DEX NUMBER(3) DEFAULT 10,
    PLAYER_INT NUMBER(3) DEFAULT 10,
    CREATED_DATE DATE DEFAULT SYSDATE
);

-- 플레이어 인벤토리 테이블 
CREATE TABLE PLAYER_INVENTORY (
    INVENTORY_ID VARCHAR2(20) PRIMARY KEY,
    PLAYER_ID VARCHAR2(20) NOT NULL,
    ITEM_ID VARCHAR2(20) NOT NULL,
    ITEM_TYPE VARCHAR2(20) NOT NULL, 
    ITEM_QUANTITY NUMBER(3) DEFAULT 1,
    ITEM_DURABILITY NUMBER(3),
    IS_EQUIPPED CHAR(1) DEFAULT 'N' CHECK (IS_EQUIPPED IN ('Y', 'N')),
    CONSTRAINT FK_PLAYER_ID FOREIGN KEY (PLAYER_ID) REFERENCES PLAYER(PLAYER_ID)
);

-- 거래 내역 테이블 
CREATE TABLE TRANSACTION_HISTORY (
    TRANSACTION_ID VARCHAR2(20) PRIMARY KEY,
    PLAYER_ID VARCHAR2(20) NOT NULL,
    SHOP_ID VARCHAR2(20) NOT NULL,
    ITEM_ID VARCHAR2(20) NOT NULL,
    TRANSACTION_TYPE VARCHAR2(10) CHECK (TRANSACTION_TYPE IN ('BUY', 'SELL')),
    QUANTITY NUMBER(3) NOT NULL,
    TOTAL_PRICE NUMBER(10) NOT NULL,
    TRANSACTION_DATE DATE DEFAULT SYSDATE,
    CONSTRAINT FK_TRAN_PLAYER_ID FOREIGN KEY (PLAYER_ID) REFERENCES PLAYER(PLAYER_ID),
    CONSTRAINT FK_TRAN_SHOP_ID FOREIGN KEY (SHOP_ID) REFERENCES SHOP(SHOP_ID)
);

--insert table
-- ITEM_CATEGORY 테이블 
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT001', '무기', '전투에 사용되는 모든 무기류');
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT002', '방어구', '몸을 보호하는 모든 방어구류');
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT003', '소모품', '일회성으로 사용되는 아이템');
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT004', '재료', '아이템 제작에 필요한 재료');
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT005', '액세서리', '캐릭터 능력치를 향상시키는 장신구');
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT006', '퀘스트 아이템', '퀘스트를 완료하는데 필요한 아이템');
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT007', '마법 아이템', '특수한 마법 효과가 있는 아이템');
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT008', '음식', '플레이어의 체력을 회복시키는 음식');
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT009', '스크롤', '일회성으로 사용되는 마법 스크롤');
INSERT INTO ITEM_CATEGORY(CATEGORY_ID, CATEGORY_NAME, CATEGORY_DESC) VALUES('CAT010', '보석', '장비 강화나 판매를 위한 귀중한 보석');

-- WEAPON 테이블 
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W001', '불꽃의 장검', 45, 'long_sword', 'CAT001', '붉은 불꽃이 감도는 강력한 장검', 15);
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W002', '얼음 활', 38, 'bow', 'CAT001', '얼음 화살을 발사하는 마법의 활', 12);
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W003', '번개의 창', 50, 'spear', 'CAT001', '번개의 힘이 깃든 창', 18);
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W004', '암흑 대검', 55, 'great_sword', 'CAT001', '어둠의 기운이 서린 대검', 20);
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W005', '바람의 단검', 30, 'dagger', 'CAT001', '바람처럼 빠른 공격이 가능한 단검', 8);
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W006', '빛나는 지팡이', 42, 'staff', 'CAT001', '마력이 깃든 마법사의 지팡이', 14);
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W007', '드워프의 전투도끼', 48, 'axe', 'CAT001', '드워프 족이 만든 튼튼한 전투도끼', 16);
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W008', '자연의 지팡이', 35, 'staff', 'CAT001', '자연의 힘을 담은 드루이드의 지팡이', 10);
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W009', '고대의 도검', 60, 'long_sword', 'CAT001', '고대 문명에서 제작된 강력한 도검', 25);
INSERT INTO WEAPON(WEAPON_ID, WEAPON_NAME, WEAPON_ATK, WEAPON_TYPE, CATEGORY_ID, WEAPON_DESC, MIN_LEVEL) VALUES('W010', '마법 석궁', 40, 'crossbow', 'CAT001', '마법의 힘으로 화살을 발사하는 석궁', 13);

-- ARMOUR 테이블 
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A001', '드래곤 헬멧', 25, 'heavy_armour_h', 'CAT002', '드래곤 비늘로 만든 튼튼한 헬멧', 'head', 18);
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A002', '그림자 망토', 15, 'light_armour_b', 'CAT002', '착용자를 부분적으로 투명하게 만드는 망토', 'body', 10);
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A003', '철제 가슴판', 30, 'medium_armour_b', 'CAT002', '튼튼한 철로 만든 가슴 방어구', 'body', 15);
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A004', '마법 부츠', 12, 'light_armour_f', 'CAT002', '이동 속도를 높여주는 마법의 부츠', 'feet', 8);
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A005', '전사의 건틀릿', 18, 'medium_armour_g', 'CAT002', '전투력을 높여주는 강화된 장갑', 'hands', 12);
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A006', '마력의 로브', 10, 'light_armour_b', 'CAT002', '마법 저항력이 뛰어난 로브', 'body', 9);
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A007', '판금 갑옷', 35, 'heavy_armour_b', 'CAT002', '전신을 보호하는 튼튼한 판금 갑옷', 'body', 20);
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A008', '엘프의 모자', 14, 'light_armour_h', 'CAT002', '엘프의 마법이 깃든 가벼운 모자', 'head', 7);
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A009', '바다의 갑옷', 28, 'medium_armour_b', 'CAT002', '물속에서도 자유롭게 움직일 수 있는 갑옷', 'body', 16);
INSERT INTO ARMOUR(ARMOUR_ID, ARMOUR_NAME, ARMOUR_DEF, ARMOUR_TYPE, CATEGORY_ID, ARMOUR_DESC, ARMOUR_SLOT, MIN_LEVEL) VALUES('A010', '불멸자의 방패', 40, 'heavy_armour_s', 'CAT002', '거의 모든 공격을 방어할 수 있는 전설의 방패', 'shield', 25);

-- MISC_MASTER_TABLE 테이블 
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M001', '드래곤 비늘', 'resource', '희귀한 드래곤의 비늘', 'Y');
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M002', '치유의 물약', 'potion', '체력을 50 회복시키는 물약', 'Y');
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M003', '강철 주괴', 'resource', '무기 제작에 필요한 고품질 강철', 'Y');
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M004', '마나 결정', 'resource', '마법 아이템 제작에 필요한 마나 결정', 'Y');
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M005', '엘프의 실', 'resource', '가벼우면서도 강한 엘프의 실', 'Y');
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M006', '불의 정수', 'resource', '불의 속성이 담긴 마법 정수', 'Y');
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M007', '망각의 두루마리', 'scroll', '모든 스킬을 재분배할 수 있는 두루마리', 'Y');
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M008', '마력 깃든 보석', 'jewel', '장비 강화에 사용되는 마력 깃든 보석', 'Y');
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M009', '정령의 꽃', 'resource', '희귀한 마법 꽃', 'Y');
INSERT INTO MISC_MASTER_TABLE(MISC_ID, MISC_NAME, MISC_TYPE, MISC_DESC, STACKABLE) VALUES('M010', '투명 망토', 'equipment', '착용자를 잠시 투명하게 만드는 망토', 'N');

-- ARMOUR_SET 테이블 
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET001', '드래곤 슬레이어', 'STR +15, 화속성 저항 +30%', 20);
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET002', '그림자 잠입자', 'DEX +20, 은신 확률 15% 증가', 15);
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET003', '마법사의 영지', 'INT +25, 마나 회복 +10%', 18);
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET004', '전쟁의 신', 'STR +20, 최대 체력 +100', 22);
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET005', '숲의 수호자', 'DEX +15, 자연 속성 공격력 +20%', 16);
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET006', '심해의 지배자', 'STR +10, 수속성 저항 +40%', 19);
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET007', '태양의 기사', 'STR +12, 빛속성 공격력 +25%', 17);
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET008', '황혼의 마법사', 'INT +30, 어둠속성 공격력 +20%', 21);
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET009', '천상의 수호자', 'DEX +10, STR +10, INT +10', 25);
INSERT INTO ARMOUR_SET(ARMOUR_SET_ID, ARMOUR_SET_NAME, ARMOUR_SET_EFFECT, MIN_LEVEL) VALUES('SET010', '불멸의 전사', 'STR +25, 치명타 확률 +15%', 30);

-- ARMOUR_SET_ITEMS 테이블 
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET001', 'W001', 'WEAPON');
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET001', 'A001', 'ARMOUR_HELM');
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET002', 'W002', 'WEAPON');
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET002', 'A002', 'ARMOUR_BODY');
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET003', 'W006', 'WEAPON');
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET003', 'A006', 'ARMOUR_BODY');
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET004', 'W004', 'WEAPON');
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET004', 'A007', 'ARMOUR_BODY');
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET005', 'W005', 'WEAPON');
INSERT INTO ARMOUR_SET_ITEMS(ARMOUR_SET_ID, ITEM_ID, ITEM_TYPE) VALUES('SET005', 'A008', 'ARMOUR_HEAD');

-- SHOP 테이블 
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH001', '대장장이의 대장간', '왕국 중앙 광장', '무기상점', '최고급 무기를 판매하는 명품 대장간');
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH002', '비밀의 연금술 상점', '마법사 거리 13번지', '소모품상점', '희귀한 물약과 마법 재료를 판매하는 상점');
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH003', '수호자의 갑옷점', '기사 구역 5번지', '방어구상점', '튼튼한 갑옷과 방패를 판매하는 상점');
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH004', '마법의 지팡이', '마법 타워 입구', '마법상점', '마법 도구와 지팡이를 판매하는 상점');
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH005', '모험가의 보급창고', '모험자 길드 옆', '종합상점', '모험에 필요한 다양한 물품을 판매하는 상점');
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH006', '엘프의 화살상점', '엘프 숲 입구', '활/화살상점', '고품질 활과 화살을 판매하는 상점');
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH007', '드워프의 대장간', '광산 마을 중심', '무기/방어구상점', '드워프가 제작한 무기와 방어구를 판매하는 상점');
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH008', '보석 세공사', '귀족 구역 3번지', '보석상점', '희귀한 보석과 액세서리를 판매하는 상점');
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH009', '마을 잡화점', '마을 광장 동쪽', '잡화상점', '일상 생활에 필요한 다양한 물품을 판매하는 상점');
INSERT INTO SHOP(SHOP_ID, SHOP_NAME, SHOP_LOC, SHOP_TYPE, SHOP_DESC) VALUES('SH010', '암시장', '지하 뒷골목', '희귀아이템상점', '희귀하고 특별한 아이템을 판매하는 비밀 상점');

-- PRODUCT_LIST 테이블 
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH001', 'W001', 'WEAPON', 5000, 3);
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH001', 'W002', 'WEAPON', 4200, 5);
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH002', 'M002', 'MISC', 250, 50);
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH002', 'M001', 'MISC', 1500, 8);
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH003', 'A003', 'ARMOUR', 3800, 4);
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH003', 'A007', 'ARMOUR', 6500, 2);
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH004', 'W006', 'WEAPON', 4800, 3);
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH005', 'M004', 'MISC', 800, 15);
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH006', 'W002', 'WEAPON', 4000, 7);
INSERT INTO PRODUCT_LIST(SHOP_ID, PRODUCT_ID, PRODUCT_TYPE, PRODUCT_PRICE, PRODUCT_STOCK) VALUES('SH010', 'M010', 'MISC', 12000, 1);

-- RECIPE_MISC 테이블 
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM001', '불꽃의 장검 제작법');
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM002', '치유의 물약 제조법');
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM003', '얼음 활 제작법');
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM004', '드래곤 헬멧 제작법');
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM005', '번개의 창 제작법');
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM006', '암흑 대검 제작법');
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM007', '마나 물약 제조법');
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM008', '판금 갑옷 제작법');
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM009', '마력 깃든 보석 제작법');
INSERT INTO RECIPE_MISC(RECIPE_MISC_ID, RECIPE_DESC) VALUES('RM010', '빛나는 지팡이 제작법');

-- RECIPE_INGREDIENTS 테이블 
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM001', 'M001', 5);
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM001', 'M003', 3);
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM002', 'M001', 1);
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM002', 'M009', 2);
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM003', 'M003', 2);
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM003', 'M004', 4);
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM004', 'M001', 8);
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM004', 'M003', 5);
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM005', 'M003', 4);
INSERT INTO RECIPE_INGREDIENTS(RECIPE_MISC_ID, INGREDIENT_ID, AMOUNT) VALUES('RM005', 'M006', 3);


-- RECIPE 테이블 
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R001', 'RM001', 'W001', 'WEAPON', '불꽃의 장검 제작', '드래곤 비늘로 강력한 불꽃의 장검을 제작합니다');
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R002', 'RM002', 'M002', 'MISC', '치유의 물약 제조', '다양한 약초를 조합하여 치유의 물약을 만듭니다');
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R003', 'RM003', 'W002', 'WEAPON', '얼음 활 제작', '마나 결정과 강철로 얼음 화살을 발사할 수 있는 활을 제작합니다');
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R004', 'RM004', 'A001', 'ARMOUR', '드래곤 헬멧 제작', '드래곤 비늘로 강력한 방어력을 가진 헬멧을 제작합니다');
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R005', 'RM005', 'W003', 'WEAPON', '번개의 창 제작', '불의 정수를 사용하여 번개의 힘을 가진 창을 제작합니다');
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R006', 'RM006', 'W004', 'WEAPON', '암흑 대검 제작', '특수한 재료로 어둠의 기운이 서린 대검을 제작합니다');
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R007', 'RM007', 'M004', 'MISC', '마나 물약 제조', '마력이 담긴 재료로 마나를 회복하는 물약을 제조합니다');
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R008', 'RM008', 'A007', 'ARMOUR', '판금 갑옷 제작', '고품질 강철로 견고한 판금 갑옷을 제작합니다');
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R009', 'RM009', 'M008', 'MISC', '마력 깃든 보석 제작', '희귀한 재료로 장비 강화에 사용되는 보석을 제작합니다');
INSERT INTO RECIPE(RECIPE_ID, RECIPE_MISC_ID, RECIPE_RESULT_ID, RECIPE_RESULT_TYPE, RECIPE_NAME, RECIPE_DESC) VALUES('R010', 'RM010', 'W006', 'WEAPON', '빛나는 지팡이 제작', '마나 결정과 특수 재료로 강력한 지팡이를 제작합니다');

-- PLAYER 테이블 
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P001', '아서왕', 25, 15000, 30, 15, 10);
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P002', '메르린', 22, 8500, 8, 12, 35);
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P003', '레골라스', 18, 6200, 14, 32, 10);
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P004', '김리', 20, 9800, 28, 12, 8);
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P005', '간달프', 30, 12500, 10, 15, 40);
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P006', '아라곤', 24, 7500, 25, 20, 15);
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P007', '그림자도적', 16, 4500, 12, 28, 8);
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P008', '불의마법사', 19, 6800, 8, 10, 30);
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P009', '신념의기사', 21, 8200, 26, 14, 12);
INSERT INTO PLAYER(PLAYER_ID, PLAYER_NAME, PLAYER_LEVEL, PLAYER_GOLD, PLAYER_STR, PLAYER_DEX, PLAYER_INT) VALUES('P010', '대장장이', 23, 25000, 24, 16, 18);

-- PLAYER_INVENTORY 테이블 
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV001', 'P001', 'W001', 'WEAPON', 1, 95, 'Y');
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV002', 'P001', 'A001', 'ARMOUR', 1, 90, 'Y');
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV003', 'P002', 'W006', 'WEAPON', 1, 85, 'Y');
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV004', 'P002', 'M002', 'MISC', 15, NULL, 'N');
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV005', 'P003', 'W002', 'WEAPON', 1, 92, 'Y');
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV006', 'P004', 'W007', 'WEAPON', 1, 88, 'Y');
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV007', 'P005', 'W008', 'WEAPON', 1, 94, 'Y');
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV008', 'P006', 'W004', 'WEAPON', 1, 91, 'Y');
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV009', 'P007', 'W005', 'WEAPON', 1, 89, 'Y');
INSERT INTO PLAYER_INVENTORY(INVENTORY_ID, PLAYER_ID, ITEM_ID, ITEM_TYPE, ITEM_QUANTITY, ITEM_DURABILITY, IS_EQUIPPED) VALUES('INV010', 'P008', 'W006', 'WEAPON', 1, 93, 'Y');

-- TRANSACTION_HISTORY 테이블 
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN001', 'P001', 'SH001', 'W001', 'BUY', 1, 5000, SYSDATE);
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN002', 'P001', 'SH003', 'A001', 'BUY', 1, 3500, SYSDATE-1);
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN003', 'P002', 'SH004', 'W006', 'BUY', 1, 4800, SYSDATE-2);
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN004', 'P002', 'SH002', 'M002', 'BUY', 15, 3750, SYSDATE-3);
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN005', 'P003', 'SH006', 'W002', 'BUY', 1, 4200, SYSDATE-4);
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN006', 'P004', 'SH007', 'W007', 'BUY', 1, 4500, SYSDATE-5);
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN007', 'P005', 'SH004', 'W008', 'BUY', 1, 3800, SYSDATE-6);
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN008', 'P006', 'SH001', 'W004', 'BUY', 1, 5200, SYSDATE-7);
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN009', 'P007', 'SH005', 'W005', 'BUY', 1, 3200, SYSDATE-8);
INSERT INTO TRANSACTION_HISTORY(TRANSACTION_ID, PLAYER_ID, SHOP_ID, ITEM_ID, TRANSACTION_TYPE, QUANTITY, TOTAL_PRICE, TRANSACTION_DATE) VALUES('TXN010', 'P008', 'SH004', 'W006', 'BUY', 1, 4800, SYSDATE-9);

-- 커밋
COMMIT;


-- 각 테이블 조회
SELECT * FROM ITEM_CATEFORY; --아이템 카테고리
SELECT * FROM WEAPON;  --무기
SELECT * FROM ARMOUR; --방어구
SELECT * FROM ARMOUR_SET; --방어구 세트 효과
SELECT * FROM ARMOUR_SET_ITEMS; -- 방어구 세트 구성요소
SELECT * FROM MISC_MASTER_TABLE; -- 기타 아이템
SELECT * FROM RECIPE_MISC; -- 아이템 제작법 기본정보
SELECT * FROM RECIPE_INGREDIENTS; -- 제작에 필요한 재료 및 수량
SELECT * FROM RECIPE; -- 제작 결과물
SELECT * FROM SHOP; -- 상점 정보
SELECT * FROM PRODUCT_LIST; -- 각 상점에서 판매하는 상품 목록 관리
SELECT * FROM PLAYER_INVENTORY; -- 플레이어 인벤토리
SELECT * FROM TRANSACTION_HISTORY; -- 플레이어와 상점간의 거래내역


-- 플레이어의 총합 전투력 확인
SELECT 
    p.PLAYER_NAME, 
    p.PLAYER_LEVEL,
    w.WEAPON_NAME, 
    w.WEAPON_ATK,
    a.ARMOUR_NAME, 
    a.ARMOUR_DEF,
    (w.WEAPON_ATK + NVL(a.ARMOUR_DEF, 0)) AS TOTAL_POWER
FROM 
    PLAYER p
LEFT JOIN 
    PLAYER_INVENTORY iw ON p.PLAYER_ID = iw.PLAYER_ID AND iw.ITEM_TYPE = 'WEAPON' AND iw.IS_EQUIPPED = 'Y'
LEFT JOIN 
    WEAPON w ON iw.ITEM_ID = w.WEAPON_ID
LEFT JOIN 
    PLAYER_INVENTORY ia ON p.PLAYER_ID = ia.PLAYER_ID AND ia.ITEM_TYPE = 'ARMOUR' AND ia.IS_EQUIPPED = 'Y'
LEFT JOIN 
    ARMOUR a ON ia.ITEM_ID = a.ARMOUR_ID
ORDER BY 
    TOTAL_POWER DESC;

--테이블에 저장된 장비의 세트 구성요소와 효과를 확인  
SELECT
    a.ARMOUR_SET_NAME,
    a.ARMOUR_SET_EFFECT,
    w.WEAPON_NAME,
    ar_h.ARMOUR_NAME as HELMET_NAME,
    ar_b.ARMOUR_NAME as BODY_NAME
FROM
    ARMOUR_SET a
JOIN
    ARMOUR_SET_ITEMS asi_w ON a.ARMOUR_SET_ID = asi_w.ARMOUR_SET_ID AND asi_w.ITEM_TYPE = 'WEAPON'
JOIN
    WEAPON w ON asi_w.ITEM_ID = w.WEAPON_ID
LEFT JOIN
    ARMOUR_SET_ITEMS asi_h ON a.ARMOUR_SET_ID = asi_h.ARMOUR_SET_ID AND asi_h.ITEM_TYPE LIKE '%HELM%'
LEFT JOIN
    ARMOUR ar_h ON asi_h.ITEM_ID = ar_h.ARMOUR_ID
JOIN
    ARMOUR_SET_ITEMS asi_b ON a.ARMOUR_SET_ID = asi_b.ARMOUR_SET_ID AND asi_b.ITEM_TYPE LIKE '%BODY%'
JOIN
    ARMOUR ar_b ON asi_b.ITEM_ID = ar_b.ARMOUR_ID
WHERE
    a.ARMOUR_SET_NAME = '마법사의 영지';
    
--플레이어의 직업별 추천 장비를 확인
SELECT 
    CASE 
        WHEN p.PLAYER_STR > p.PLAYER_DEX AND p.PLAYER_STR > p.PLAYER_INT THEN '전사'
        WHEN p.PLAYER_DEX > p.PLAYER_STR AND p.PLAYER_DEX > p.PLAYER_INT THEN '도적'
        WHEN p.PLAYER_INT > p.PLAYER_STR AND p.PLAYER_INT > p.PLAYER_DEX THEN '마법사'
        ELSE '균형'
    END AS CHARACTER_CLASS,
    p.PLAYER_NAME,
    a.ARMOUR_SET_NAME,
    a.ARMOUR_SET_EFFECT
FROM 
    PLAYER p,
    ARMOUR_SET a
WHERE 
    (p.PLAYER_STR > p.PLAYER_DEX AND p.PLAYER_STR > p.PLAYER_INT AND a.ARMOUR_SET_EFFECT LIKE '%STR%')
    OR (p.PLAYER_DEX > p.PLAYER_STR AND p.PLAYER_DEX > p.PLAYER_INT AND a.ARMOUR_SET_EFFECT LIKE '%DEX%')
    OR (p.PLAYER_INT > p.PLAYER_STR AND p.PLAYER_INT > p.PLAYER_DEX AND a.ARMOUR_SET_EFFECT LIKE '%INT%')
ORDER BY 
    CHARACTER_CLASS, 
    p.PLAYER_LEVEL DESC;
    